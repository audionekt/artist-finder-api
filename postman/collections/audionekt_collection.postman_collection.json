{
	"info": {
		"_postman_id": "a1df5973-b19e-445e-bcf6-3af84e956d65",
		"name": "audionekt_collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "user",
			"item": [
				{
					"name": "all users",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "{\n    users {\n        id\n        firstName\n        lastName\n        username\n        email\n        bands {\n            id\n            name\n        }\n        following {\n            id\n            email\n            username \n        }\n        followers {\n            id\n            email\n            username\n        }\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "user by id",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query($id: String!) {\n    user(id: $id) {\n        id\n        firstName\n        lastName\n        username\n        email\n        bands {\n            name\n        }\n        following {\n            username\n        }\n\n        followers {\n            username\n        }\n    }\n}",
								"variables": "{\n    \"id\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "register",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const email = JSON.parse(pm.request.body.graphql.variables).email",
									"pm.environment.set(\"email\", email);",
									"console.info(`updating variables with email: ${email}`)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation(\n    $email: String!, \n    $password: String!, \n    $username: String!, \n    $firstName: String!, \n    $lastName: String!\n    ) {\n    register(\n        options: \n            {\n                email: $email, \n                password: $password, \n                username: $username, \n                firstName: $firstName, \n                lastName: $lastName\n            }\n    ) {\n        user {\n            id\n            firstName\n            lastName\n            username\n            email\n       }\n       errors {\n           field\n           message\n       }\n    }\n}",
								"variables": "{\n    \"username\": \"arunscape@gmail.com\",\n    \"password\": \"password\",\n    \"email\": \"arunscape@gmail.com\",\n    \"firstName\": \"arun\",\n    \"lastName\": \"ravishankar\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "login",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation($usernameOrEmail: String!, $password: String!) {\n    login(usernameOrEmail: $usernameOrEmail, password: $password) {\n        errors {\n            message\n        }\n        user {\n            id\n            firstName\n            lastName\n            username\n            email\n            bands {\n                id\n                name\n                members {\n                    email\n                }\n            }\n            following {\n                username\n            }\n            followers {\n                username\n            }\n       }\n    }\n}",
								"variables": "{\n    \"usernameOrEmail\": \"{{email}}\",\n    \"password\": \"password\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "me",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "{\n    me {\n        id\n        firstName\n        email\n        bands {\n            name\n            members {\n                username\n            }\n        }\n        bands_following {\n            name\n            members {\n                username\n            }\n        }\n        following {\n            username\n        }\n        followers {\n            username\n        }\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.environment.set(\"email\", \"\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation  {\n    logout\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "follow user",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation($userId: String!) {\n    followUser(userId: $userId) {\n        user {\n             username\n             followers {\n                 username\n             }\n             following {\n                 username\n             }\n           }\n           errors {\n               field\n               message\n           }\n    }\n}",
								"variables": "{\n    \"userId\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "band",
			"item": [
				{
					"name": "all bands",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "{\n    bands {\n        id\n        name\n        members {\n            username\n        }\n        fans {\n            username\n        }\n    }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "band by id",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query($id: String!) {\n    band(id: $id) {\n        id\n        name\n        members {\n            username\n        }\n    }\n}",
								"variables": "{\n    \"id\": \"{{bandId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "add user to band",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation($bandId: String!, $userId: String!) {\n    addUserToBand(bandId: $bandId, userId: $userId) {\n           user {\n                id\n                username\n                email\n                bands {\n                    id\n                    name\n                }\n           } \n           \n           errors {\n               field\n               message\n           }\n    }\n}",
								"variables": "{\n    \"bandId\": \"{{bandId}}\",\n    \"userId\": \"907d283d-d4d5-4414-af79-d14437817f58\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "follow band",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation($bandId: String!) {\n    followBand(bandId: $bandId) {\n        user {\n             id\n             username\n             email\n             followers {\n                 username\n             }\n             following {\n                 username\n             }\n             bands_following {\n                 name\n             }\n           }\n           errors {\n               field\n               message\n           }\n    }\n}",
								"variables": "{\n    \"bandId\": \"{{bandId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{graphql}}",
							"host": [
								"{{graphql}}"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}